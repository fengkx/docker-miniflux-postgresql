
version: "3"
services:
  database.postgres:
    image: sameersbn/postgresql:latest
    container_name: postgres-miniflux
    environment:
      - DB_NAME=miniflux2
      - PG_PASSWORD=miniflux # please change the password
    volumes:
      - ~/postgres/data/:/var/lib/postgresql/ # persist postgres data to ~/postgres/data/ on the host
    restart: always
  service.rss:
    image: fengkx/miniflux:amd64-latest
    container_name: miniflux
    ports:
      - 2507:8080
    environment: #see all env at https://miniflux.app/docs/configuration.html
      - DEBUG
      - WORKER_POOL_SIZE=5
      - POLLING_FREQUENCY=60
      - BATCH_SIZE=10
      - RUN_MIGRATIONS=1
      - BASE_URL=http://localhost/ #please change to your domain
      - DATABASE_URL= host=database.postgres user=postgres password=miniflux dbname=miniflux2 sslmode=disable #please change the password
      - DATABASE_MAX_CONNS=20
      - DATABASE_MIN_CONNS=1
      - ARCHIVE_READ_DAYS=60
      - PORT=8080
      - CREATE_ADMIN=1
      - ADMIN_USERNAME=admin
      - ADMIN_PASSWORD=password #please change the password
      - REQUEST_MAX_TIMEOUT=20
    stdin_open: true
    tty: true
    restart: always
    command: sh -c /usr/bin/miniflux
